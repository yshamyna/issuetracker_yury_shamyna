<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript">
			function a() {
				var sum = 0;
				for (i=0;i<arguments.length;i++) {
					sum += arguments[i];
				}
				return sum;
			}
			function getXmlHttp(){
		  		var xmlhttp;
		  		try {
		    		xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
		  		} catch (e) {
		    		try {
		      			xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
		    		} catch (E) {
		      			xmlhttp = false;
		    		}
		  		}
		  		if (!xmlhttp && typeof XMLHttpRequest!='undefined') {
		    		xmlhttp = new XMLHttpRequest();
		  		}
		  		return xmlhttp;
			}
		
			function go() {
				var list = document.getElementById('selectId');
				while(list.childNodes[0]){
					list.removeChild(list.childNodes[0]);
				}
			}
			
			function selectChange() {
				var req = getXmlHttp();
				req.onreadystatechange = function() { 
		        	if (req.readyState == 4 && req.status == 200) {
		        		var ansDiv = document.getElementById('answer');
		        		alert(req.responseText);
		            }
		     	}
				var select = document.getElementById('selectId');
				var value = select.options[select.selectedIndex].value;
				req.open('GET', '/issuetracker/get_builds?id=' + value, true);
				req.send(null);
			}
		</script>
	</head>
	<body>
		<select id="selectId" name="roles" onchange="selectChange();"/>
			<option value="1">1</option>
			<option value="2">2</option>
			<option value="3">3</option>
			<option value="4">4</option>
			<option value="5">5</option>
		</select>
		<input type="button" onclick="go();" value="GO"/>
		<div id="answer" style="background-color:red;width:200px;height:200px;"></div>
	</body>
</html>



<div style="position:relative;width:100%;height:400px;background-color:rgb(25, 28, 36);font-family:arial;color:white;font-size:10pt;margin-top:1px;">
				<div style="float:left;height:30px;background-color">
				</div>
				<span style="position:absolute;right:50%;top:10px;margin-right:100px;">Create date:</span> 
				<input style="position:absolute;left:50%;top:5px;margin-left:-100px;width:200px;" type="text" name="Create date" value="${issue.createDate}" readonly/>
			
				<span style="position:absolute;right:50%;top:35px;margin-right:100px;">Create by:</span> 
				<input style="position:absolute;left:50%;top:30px;margin-left:-100px;width:200px;" type="text" name="Create by" value="${issue.createdBy.firstName} ${issue.createdBy.lastName}" readonly/>
				
				<span style="position:absolute;right:50%;top:60px;margin-right:100px;">Modify date:</span> 
				<input style="position:absolute;left:50%;top:55px;margin-left:-100px;width:200px;" type="text" name="Modify date" value="${issue.modifyDate}" readonly/>
				
				<span style="position:absolute;right:50%;top:85px;margin-right:100px;">Modify by:</span> 
				<input style="position:absolute;left:50%;top:80px;margin-left:-100px;width:200px;" type="text" name="Modify by" value="${issue.modifyBy.firstName} ${issue.modifyBy.lastName}" readonly/>
			
				<span style="position:absolute;right:50%;top:110px;margin-right:100px;">Summary:</span> 
				<input id="summary" style="position:absolute;left:50%;top:105px;margin-left:-100px;width:200px;" type="text" name="Summary" value="${issue.summary}"/>
		
				<span style="position:absolute;right:50%;top:135px;margin-right:100px;">Description:</span>
				<textarea id="description" style="position:absolute;left:50%;top:130px;margin-left:-100px;max-width:200px;max-height:50px;width:200px;height:50px;" name="Description">${issue.description}</textarea>
		
				<span style="position:absolute;right:50%;top:190px;margin-right:100px;">Status:</span>
				<select id="status" style="position:absolute;left:50%;top:185px;margin-left:-100px;width:204px;" name="status"/>
					<c:forEach var="status" items="${statuses}">
						<c:choose>
							<c:when test="${status.id eq issue.status.id}">
								<option value="${status.id}" selected>${status.value}</option>
							</c:when>
							<c:otherwise>
								<option value="${status.id}">${status.value}</option>		
							</c:otherwise>
						</c:choose>
					</c:forEach>
				</select>
				
				<span style="position:absolute;right:50%;top:212px;margin-right:100px;">Type:</span>
				<select id="type" style="position:absolute;left:50%;top:207px;margin-left:-100px;width:204px;" name="type"/>
					<c:forEach var="type" items="${types}">
						<c:choose>
							<c:when test="${type.id eq issue.type.id}">
								<option value="${type.id}" selected>${type.value}</option>
							</c:when>
							<c:otherwise>
								<option value="${type.id}">${type.value}</option>	
							</c:otherwise>
						</c:choose>
					</c:forEach>
				</select>
				
				<span style="position:absolute;right:50%;top:234px;margin-right:100px;">Priority:</span>
				<select id="priority" style="position:absolute;left:50%;top:229px;margin-left:-100px;width:204px;" name="priority"/>
					<c:forEach var="priority" items="${priorities}">
						<c:choose>
							<c:when test="${priority.id eq issue.priority.id}">
								<option value="${priority.id}" selected>${priority.value}</option>
							</c:when>
							<c:otherwise>
								<option value="${priority.id}">${priority.value}</option>	
							</c:otherwise>
						</c:choose>
					</c:forEach>
				</select>
				
				<span style="position:absolute;right:50%;top:256px;margin-right:100px;">Project:</span>
				<select id="select-projects" onchange="changeProject();" style="position:absolute;left:50%;top:251px;margin-left:-100px;width:204px;" name="project"/>
					<c:forEach var="project" items="${projects}">
						<c:choose>
							<c:when test="${project.id eq issue.project.id}">
								<option value="${project.id}" selected>${project.name}</option>
							</c:when>
							<c:otherwise>
								<option value="${project.id}">${project.name}</option>	
							</c:otherwise>
						</c:choose>
					</c:forEach>
				</select>
				
				<span style="position:absolute;right:50%;top:278px;margin-right:100px;">Build found:</span>
				<select id="select-builds" style="position:absolute;left:50%;top:273px;margin-left:-100px;width:204px;" name="build"/>
					<c:forEach var="build" items="${builds}">
						<c:choose>
							<c:when test="${build.id eq issue.buildFound.id}">
								<option value="${build.id}" selected>${build.version}</option>
							</c:when>
							<c:otherwise>
								<option value="${build.id}">${build.version}</option>	
							</c:otherwise>
						</c:choose>
					</c:forEach>
				</select>
				
				<span style="position:absolute;right:50%;top:300px;margin-right:100px;">Assignee:</span>
				<select id="assignee" style="position:absolute;left:50%;top:295px;margin-left:-100px;width:204px;" name="assignee"/>
					<option value="-1" selected></option>
					<c:forEach var="assignee" items="${assignees}">
						<c:choose>
							<c:when test="${assignee.id eq issue.assignee.id}">
								<option value="${assignee.id}" selected>${assignee.firstName} ${assignee.lastName}</option>
							</c:when>
							<c:otherwise>
								<option value="${assignee.id}">${assignee.firstName} ${assignee.lastName}</option>	
							</c:otherwise>
						</c:choose>
					</c:forEach>
				</select>
				
				<div style="text-align:center;position:absolute;top:320px;width:100%">
					<span id="msg" style="font-size:10pt;color:red;margin:auto;"></span>
				</div>
				<input id="submitBtn" style="position:absolute;left:50%;top:340px;margin-left:-100px;width:204px;border:1px solid #3079ed;color:#fff;background-color: #4d90fe;border-radius:3px;height:30px;font-size:12pt;font-weight:bold;" type="button" value="Edit">
			</div>